{
  "name": "@jlnstack/i18n",
  "description": "Type-safe, tree-shakeable i18n with RSC support and visual studio",
  "sprint": {
    "issues": [
      {
        "id": 1,
        "title": "Project setup",
        "description": "Create package structure, package.json, tsconfig, tsdown config, vitest config",
        "done": true
      },
      {
        "id": 2,
        "title": "Core types",
        "description": "Define TranslationValue, TranslationDict, ExtractVars, TranslateFn types",
        "done": true
      },
      {
        "id": 3,
        "title": "defineTranslations helper",
        "description": "Helper function to define translations with proper typing and individual exports",
        "done": true
      },
      {
        "id": 4,
        "title": "Interpolation",
        "description": "Implement interpolate function for {var} replacement",
        "done": true
      },
      {
        "id": 5,
        "title": "createTranslation (sync core)",
        "description": "Core sync translation function for non-framework usage",
        "done": true
      },
      {
        "id": 6,
        "title": "React useTranslation hook",
        "description": "Client-side hook that reads locale from context",
        "done": true
      },
      {
        "id": 7,
        "title": "React I18nProvider",
        "description": "Context provider for locale state on client",
        "done": true
      },
      {
        "id": 8,
        "title": "Next.js getLocale",
        "description": "Async function to get locale from headers/cookies",
        "done": true
      },
      {
        "id": 9,
        "title": "Next.js getTranslation",
        "description": "Async function for RSC that accepts dicts and returns translate function",
        "done": true
      },
      {
        "id": 10,
        "title": "CLI setup",
        "description": "Setup CLI binary with cac, add migrate command scaffold",
        "done": true
      },
      {
        "id": 11,
        "title": "CLI migrate command",
        "description": "Implement JSON to TS migration",
        "done": true
      },
      {
        "id": 12,
        "title": "CLI check command",
        "description": "Check for missing translations across locales",
        "done": true
      },
      {
        "id": 13,
        "title": "Studio planning",
        "description": "Document studio architecture and UI spec (no implementation)",
        "done": true
      },
      {
        "id": 14,
        "title": "Studio: TS parser",
        "description": "Parse and write translation .ts files",
        "done": true
      },
      {
        "id": 15,
        "title": "Studio: Server setup",
        "description": "HTTP server with REST API endpoints",
        "done": true
      },
      {
        "id": 16,
        "title": "Studio: File watcher",
        "description": "Watch translation files for external changes",
        "done": true
      },
      {
        "id": 17,
        "title": "Studio: WebSocket",
        "description": "Real-time sync between UI and server",
        "done": true
      },
      {
        "id": 18,
        "title": "Studio: UI",
        "description": "Grid-based translation editor interface",
        "done": true
      },
      {
        "id": 19,
        "title": "Studio: CLI command",
        "description": "Add studio command to CLI",
        "done": false
      }
    ]
  },
  "api": {
    "core": {
      "defineTranslations": "Helper to define translation dict with type inference",
      "createTranslation": "Sync translation function for core/non-framework usage",
      "interpolate": "String interpolation for {var} patterns"
    },
    "react": {
      "I18nProvider": "Context provider for locale",
      "useTranslation": "Client hook for translations",
      "useLocale": "Get current locale from context"
    },
    "next": {
      "getLocale": "Async - get locale from headers/cookies",
      "getTranslation": "Async - accepts dicts, returns translate function for RSC"
    },
    "cli": {
      "migrate": "Convert JSON locale files to TS exports",
      "check": "Validate all locales have all keys",
      "studio": "Launch visual editor (future)"
    }
  },
  "studio": {
    "status": "planned",
    "command": "npx @jlnstack/i18n studio",
    "defaultPort": 4200,
    "features": {
      "core": [
        "Grid editor for translations (key Ã— locale)",
        "Missing translation highlighting (red cells)",
        "Search and filter by key/value/locale",
        "Inline editing with auto-save"
      ],
      "import_export": [
        "Export to CSV for external translators",
        "Export to JSON for backup",
        "Import CSV/JSON with validation",
        "Diff view for imported changes"
      ],
      "developer_experience": [
        "Live HMR sync with running app",
        "Keyboard navigation (arrow keys, Tab)",
        "Undo/redo support",
        "Syntax highlighting for interpolation {vars}"
      ],
      "future": [
        "AI translation suggestions (OpenAI/Anthropic API)",
        "Translation memory (reuse similar translations)",
        "Plural form handling",
        "Comments/notes per translation"
      ]
    },
    "architecture": {
      "server": {
        "description": "Node.js server that watches translation files and serves the UI",
        "components": [
          "File watcher (chokidar) - monitors .ts translation files",
          "REST API - CRUD operations for translations",
          "WebSocket - real-time sync with UI and HMR",
          "TS Parser - reads/writes translation files"
        ],
        "endpoints": [
          "GET /api/translations - list all translations",
          "PUT /api/translations/:key - update a translation",
          "POST /api/translations - add new key",
          "DELETE /api/translations/:key - remove key",
          "GET /api/locales - list configured locales",
          "POST /api/export - export to CSV/JSON",
          "POST /api/import - import from CSV/JSON"
        ]
      },
      "ui": {
        "description": "Minimal web interface, could be React or vanilla JS",
        "layout": [
          "Header: search bar, locale filters, export/import buttons",
          "Main: scrollable grid with keys as rows, locales as columns",
          "Footer: stats (total keys, missing count), save indicator"
        ],
        "interactions": [
          "Click cell to edit",
          "Tab to move between cells",
          "Ctrl+S to save all",
          "Escape to cancel edit"
        ]
      },
      "sync": {
        "description": "Bidirectional sync between UI and .ts files",
        "flow": [
          "1. User edits cell in UI",
          "2. WebSocket sends change to server",
          "3. Server updates .ts file",
          "4. File watcher detects change",
          "5. If app is running, HMR picks up change"
        ]
      }
    },
    "fileFormat": {
      "description": "Studio reads/writes standard defineTranslations format",
      "example": "export const login = { en: \"Sign in\", de: \"Anmelden\" } as const;"
    }
  }
}
