---
title: Introduction
description: Schema migration utilities for evolving data structures
---

# Schema

Schema migration utilities for handling evolving data structures. Works with any [Standard Schema](https://github.com/standard-schema/standard-schema) compatible library.

> **Note:** This is not a schema validation library. Use Zod, Valibot, Effect Schema, or any other Standard Schema compatible library for that. This package helps you handle migrations when your schemas evolve over time.

## Why Schema?

- **Works with existing libraries** — Use with Zod, Valibot, ArkType, or any Standard Schema compatible library.
- **Type-safe migrations** — Full TypeScript inference for migration functions.
- **Simple API** — One function, one type. That's it.

## The Problem

When you store validated data (cookies, localStorage, databases), the schema may change over time:

```ts
// v1: Initial schema
{ name: string }

// v2: Added age field
{ name: string, age: number }

// v3: Added optional email
{ name: string, age: number, email?: string }
```

Old stored data needs to be read and migrated to the current format. This package provides a clean way to handle that.

## Quick Example

```ts
import { createMigratableSchema } from "@jlnstack/schema"
import { z } from "zod"

// Your current schema (source of truth)
const userSchema = z.object({
  name: z.string(),
  age: z.number(),
  email: z.string().optional(),
})

// Wrap with migrations from older formats
const migratableSchema = createMigratableSchema(userSchema, [
  {
    from: z.object({ name: z.string() }),
    migrate: (old) => ({ name: old.name, age: 0, email: undefined }),
  },
])

// migratableSchema is a Standard Schema
// - New data validates normally
// - Old data ({ name: "John" }) migrates to { name: "John", age: 0, email: undefined }
```
